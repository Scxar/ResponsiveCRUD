import{a as O}from"./chunk-TO44YJLA.js";import{e as S}from"./chunk-674Z2RZZ.js";import{a as P,b as C,c as w,d as E,f as B,g as F,h as A,i as N,j as V,k as T,m as q}from"./chunk-YESJUV2I.js";import{Ha as p,Ka as m,Ma as i,Na as t,Oa as u,Pa as _,Qa as s,Ra as c,Ta as a,Y as h,_a as M,ea as g,fa as f,ta as k,wa as d,wb as I,xa as x,xb as y}from"./chunk-5O76MHFE.js";function R(o,n){o&1&&(i(0,"div")(1,"small",16),a(2,"Book title is required"),t()())}function G(o,n){o&1&&(i(0,"div")(1,"small",16),a(2,"Name of author is required"),t()())}function z(o,n){o&1&&(i(0,"div")(1,"small",16),a(2,"Year of publicationis required"),t()())}function U(o,n){if(o&1){let e=_();i(0,"div")(1,"button",17),s("click",function(){g(e);let l=c();return f(l.openModal())}),a(2,"Add book cover"),t()()}}function j(o,n){if(o&1){let e=_();i(0,"div")(1,"img",23),s("error",function(){g(e);let l=c(2);return f(l.onImageError())}),t(),u(2,"br"),t()}if(o&2){let e=c(2);d(),m("src",e.imageSourceInput,k)}}function L(o,n){if(o&1){let e=_();i(0,"div",18)(1,"div",19)(2,"h3"),a(3,"Book cover"),t(),i(4,"label",20),a(5,"Add the Image URL below"),t(),u(6,"input",21),i(7,"button",22),s("click",function(){g(e);let l=c();return f(l.saveImage())}),a(8,"Save"),t(),i(9,"button",22),s("click",function(){g(e);let l=c();return f(l.closeModal())}),a(10,"Cancel"),t()(),p(11,j,3,1,"div",4),t()}if(o&2){let e=c();d(11),m("ngIf",e.imageExists)}}function W(o,n){if(o&1){let e=_();i(0,"div",26)(1,"button",27),s("click",function(){g(e);let l=c(2);return f(l.openModal())}),a(2,"Change image"),t()()}}function Y(o,n){if(o&1&&(i(0,"div")(1,"div",24),a(2," Cover image is added! "),t(),p(3,W,3,0,"div",25),t()),o&2){let e=c();d(3),m("ngIf",e.imageExists)}}var D=class o{constructor(n,e,r){this.fb=n;this.bookService=e;this.router=r;this.bookForm=this.fb.group({title:["",C.required],authorName:["",C.required],year:["",C.required],description:[""],coverImage:[""]})}bookForm;showImageModal=!1;imageSourceInput="";editIndex=null;imageExists=!1;ngOnInit(){let n=history.state;if(n&&n.book){let e=n.book;this.editIndex=n.index,this.bookForm.patchValue({title:e.title||"",authorName:e.authorName||"",year:e.year||"",description:e.description||"",coverImage:e.coverImage||""}),e.coverImage&&(this.imageSourceInput=e.coverImage,this.imageExists=!0)}}openModal(){this.showImageModal=!0}closeModal(){this.showImageModal=!1}saveImage(){let n=this.bookForm.get("coverImage");n?.value?(this.imageSourceInput=n.value,console.log("Image Url:",this.imageSourceInput),this.imageExists=!0):this.imageExists=!1,this.closeModal()}onImageError(){this.imageExists=!1,console.error("Invalid image URL")}reset(){this.bookForm.reset(),this.imageExists=!1}onSubmit(){if(this.bookForm.valid){let n=this.bookForm.value;this.editIndex!==null?this.bookService.updateBook(this.editIndex,n):this.bookService.addBook(n),console.log(this.bookForm.value),this.router.navigate(["/"])}else console.error("Form is invalid"),this.bookForm.markAllAsTouched()}static \u0275fac=function(e){return new(e||o)(x(T),x(O),x(S))};static \u0275cmp=h({type:o,selectors:[["app-addbook"]],standalone:!0,features:[M],decls:28,vars:7,consts:[["novalidate","",1,"row","g-2","needs-validation",3,"ngSubmit","formGroup"],[1,"row","g-2"],["for","validationCustom01",1,"form-label"],["type","text","formControlName","title","id","validationCustom01","placeholder","What's the title for this book?","required","",1,"col-sm-6","col-form-control","field"],[4,"ngIf"],["for","validationDefault02",1,"form-label"],["type","text","formControlName","authorName","id","validationDefault02","placeholder","Who wrote this book?","required","",1,"col-sm-6","col-form-control","field"],[1,"row","g-2","year"],["for","validationDefault03",1,"form-label"],["type","number","formControlName","year","id","validationDefault03","placeholder","xxxx","required","",1,"col-sm-1","col-form-control","field"],["for","desc",1,"form-label"],["type","text","formControlName","description","placeholder","E.g. This book takes place in a place far, far away ...",1,"form-control"],["class","modal",4,"ngIf"],["id","lastelement"],["type","submit",1,"btn","btn-primary","col-sm-3","fpagebuttons"],["type","reset",1,"btn","btn-danger","col-sm-3","fpagebuttons",3,"click"],[1,"error"],["type","button",1,"btn","btn-secondary","fpagebuttons",3,"click"],[1,"modal"],[1,"modal-content"],["for","modalImgSrc"],["type","text","id","modalImgSrc","formControlName","coverImage","placeholder","https://example.com/image.png"],["type","button",3,"click"],["alt","Current book cover",3,"error","src"],["role","alert",1,"alert","alert-success"],["class","col-12",4,"ngIf"],[1,"col-12"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(e,r){if(e&1&&(i(0,"form",0),s("ngSubmit",function(){return r.onSubmit()}),i(1,"div",1)(2,"label",2),a(3,"Book title"),t(),u(4,"input",3),p(5,R,3,0,"div",4),t(),i(6,"div",1)(7,"label",5),a(8,"Name of Author"),t(),u(9,"input",6),p(10,G,3,0,"div",4),t(),i(11,"div",7)(12,"label",8),a(13,"Year of publication"),t(),u(14,"input",9),p(15,z,3,0,"div",4),t(),i(16,"div",1)(17,"label",10),a(18,"Book description"),t(),u(19,"textarea",11),t(),p(20,U,3,0,"div",4)(21,L,12,1,"div",12)(22,Y,4,1,"div",4),i(23,"div",13)(24,"button",14),a(25,"Save"),t(),i(26,"button",15),s("click",function(){return r.reset()}),a(27,"Reset form"),t()()()),e&2){let l,v,b;m("formGroup",r.bookForm),d(5),m("ngIf",((l=r.bookForm.get("title"))==null?null:l.invalid)&&((l=r.bookForm.get("title"))==null?null:l.touched)),d(5),m("ngIf",((v=r.bookForm.get("authorName"))==null?null:v.invalid)&&((v=r.bookForm.get("authorName"))==null?null:v.touched)),d(5),m("ngIf",((b=r.bookForm.get("year"))==null?null:b.invalid)&&((b=r.bookForm.get("year"))==null?null:b.touched)),d(5),m("ngIf",!r.imageExists),d(),m("ngIf",r.showImageModal),d(),m("ngIf",r.imageExists)}},dependencies:[y,I,q,B,P,F,w,E,V,A,N],styles:["form[_ngcontent-%COMP%]{display:flex;margin:20px auto;padding-left:auto;padding-right:auto;padding:10px;max-width:40%;text-align:center;border-style:dashed}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}form[_ngcontent-%COMP%]   .year[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700;text-transform:uppercase;font-size:1.5rem}form[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{display:block;position:relative;left:50%;transform:translate(-50%,-50%);background:#fff;background:none;width:80%;margin-top:100px}form[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{text-align:center}form[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:red;font-weight:700;margin-top:10px}form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:120px;margin-inline:auto}form[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{margin-inline:auto}form[_ngcontent-%COMP%]   #lastelement[_ngcontent-%COMP%]{display:flex;gap:20px}form[_ngcontent-%COMP%]   .fpagebuttons[_ngcontent-%COMP%]{flex:1}@media (max-width: 1199px){form[_ngcontent-%COMP%]{max-width:80%}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:40px}form[_ngcontent-%COMP%]   .year[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:30%}form[_ngcontent-%COMP%]   .modal[_ngcontent-%COMP%]{width:100%;margin-top:120px}form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:200px}}@media (max-width: 768px){form[_ngcontent-%COMP%]{margin:none;padding-left:none;padding-right:none;padding:10px;max-width:100%;border-style:none}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:2rem}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:50px}}"]})};export{D as AddBookComponent};
